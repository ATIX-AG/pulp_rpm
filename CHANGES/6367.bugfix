Fixed the repo revision comparison and sync optimization for sub-repos
