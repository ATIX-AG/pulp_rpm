======================
Pulp 2.4 Release Notes
======================

Pulp 2.4.0
==========

New Features
------------

 - Added the ability to generate sqlite repository metadata files as part of an RPM repo
   publish.


API Changes
-----------
 - The ``generate_sqlite`` metadata flag was added to the yum_distributor distributor type.
   Enabling that flag will turn on generation of sqlite repo metadata files.  This is not
   enabled by default.
 - Removed the ``use_createrepo`` in favor of the more precise ``generate_sqlite`` flag

Yum Importer
^^^^^^^^^^^^

When uploading RPMs, the unit key and metadata no longer need to be extracted client-side
and passed to the server. The server will inspect the RPM and extract the necessary information.

Yum metadata files can now be uploaded to a repository. Information on valid metadata
attributes can be found in the technical reference.

Upgrade Instructions
--------------------

Please see the
`Pulp Platform upgrade instructions <https://pulp-user-guide.readthedocs.org/en/pulp-2.4/release-notes.html>`_
for information on how to complete the upgrade.

Known Issue
-----------

There is a bug where if you have migrated from 2.0 or earlier of pulp to 2.2 or 2.3 and
are performing a second migration from 2.2/2.3 to 2.4 you may encounter an error that
"Applying migration pulp_rpm.plugins.migrations.0003_custom_metadata_on_scratchpad failed".
This is caused because of old data that is no longer needed but is confusing the migration.
The following command can be used to remove the data that is no longer needed:
"find /var/lib/pulp/working/repos/ -path '*/yum_importer' -type d -exec rm -rf '{}' \;"
